---
# Caspar - Security & monitoring hub + CTF environment + Beta Misskey

# Cloudflared tunnel configuration
cloudflared_tunnel_uuid: "636a9974-0dd6-4a89-97a4-e2268493d5f4"
cloudflared_config_dir: "/root/.cloudflared"

# Service-specific configurations
modsecurity_nginx_port: "{{ host_services.caspar.modsecurity_nginx }}"
prometheus_port: "{{ host_services.caspar.prometheus }}"
grafana_port: "{{ host_services.caspar.grafana }}"

# Misskey Beta configuration
misskey_port: "{{ host_services.caspar.misskey_beta }}"
misskey_host: "beta.{{ domain }}"
misskey_tag: "staging"

# Nginx services to deploy (monitoring + auth + nostr + beta misskey)
modsecurity_nginx_services:
  - "grafana"
  - "uptime"
  - "misskey_beta"
  # Auth & Security services (moved from balthasar)
  - "authentik"
  - "mcaptcha"
  # Nostr services (experimental)
  - "nostr"

# Prometheus monitoring targets
monitor_targets:
  - name: caspar
    host: "host.docker.internal"
    port: 9100
    cadvisor_port: 8085
    role: monitoring_server
  - name: balthasar
    host: "{{ hostvars['balthasar']['ansible_host'] }}"
    port: 9100
    cadvisor_port: 8085
    role: social_server
  - name: linode_prox
    host: "{{ hostvars['linode_prox']['ansible_host'] }}"
    port: 9100
    cadvisor_port: 8085
    role: proxy_server
