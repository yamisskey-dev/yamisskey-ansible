# Cloudflared Configuration (Token mode)
# MinIO behind Cloudflare Tunnel → http://minio:9000

protocol: http2

originRequest:
  disableChunkedEncoding: true
  http2Origin: true
  noHappyEyeballs: true
  connectTimeout: 2s
  keepAliveTimeout: 15s
  tcpKeepAlive: 15s
  # noTLSVerify: false   # MinIOをhttpで受けるなら不要

ingress:
  # 単一ホスト名（例：drive.yami.ski）
  - hostname: {{ truenas_minio_domain | default('minio.example.com') }}
    service: http://minio:9000
  # ワイルドカード運用するなら上を消して下の2行を有効化
  # - hostname: '*.{{ truenas_minio_domain }}'
  #   service: http://minio:9000

  - service: http_status:404

loglevel: info
# logfile を使う場合はボリュームに書き込めるパスに
# logfile: /var/log/cloudflared.log

metrics: localhost:2000