# –––––––––––––––– REQUIRED ––––––––––––––––
NODE_ENV=production
SECRET_KEY={{ outline_secret_key }}
UTILS_SECRET={{ outline_utils_secret }}
URL=https://{{ outline_server_name }}
PORT=3000

# Database
DATABASE_URL=postgresql://user:pass@postgres:5432/outline?sslmode=disable
DATABASE_CONNECTION_POOL_MIN=5
DATABASE_CONNECTION_POOL_MAX=50
PGSSLMODE=disable

# Redis
REDIS_URL=redis://redis:6379

# Storage
#FILE_STORAGE=local
#FILE_STORAGE_LOCAL_ROOT_DIR=/var/lib/outline/data
FILE_STORAGE=s3
FILE_STORAGE_UPLOAD_MAX_SIZE=104857600
FILE_STORAGE_IMPORT_MAX_SIZE=104857600
FILE_STORAGE_WORKSPACE_IMPORT_MAX_SIZE=209715200

# MinIO Settings
AWS_ACCESS_KEY_ID={{ outline_aws_access_key_id }}
AWS_SECRET_ACCESS_KEY={{ outline_aws_secret_access_key }}
AWS_REGION=ap-northeast-3
AWS_ENDPOINT=https://{{ minio_api_server_name }}
AWS_S3_UPLOAD_BUCKET_URL=https://{{ minio_api_server_name }}
AWS_S3_UPLOAD_BUCKET_NAME={{ minio_bucket_for_outline_name }}
AWS_S3_FORCE_PATH_STYLE=true

# Debug
LOG_LEVEL=debug
DEBUG=http,aws,s3,outline*

# OIDC with Authentik
OIDC_CLIENT_ID={{ outline_oidc_client_id }}
OIDC_CLIENT_SECRET={{ outline_oidc_client_secret }}
OIDC_AUTH_URI=https://{{ authentik_server_name }}/application/o/authorize/
OIDC_TOKEN_URI=https://{{ authentik_server_name }}/application/o/token/
OIDC_USERINFO_URI=https://{{ authentik_server_name }}/application/o/userinfo/
OIDC_LOGOUT_URI=https://{{ authentik_server_name }}/application/o/outline/end-session/
OIDC_USERNAME_CLAIM=preferred_username
OIDC_DISPLAY_NAME=Authentik
OIDC_SCOPES=openid profile email

# Mail
SMTP_HOST={{ outline_smtp_host }}
SMTP_PORT={{ outline_smtp_port }}
SMTP_USERNAME={{ outline_smtp_username }}
SMTP_PASSWORD={{ outline_smtp_password }}
SMTP_FROM_EMAIL={{ outline_smtp_from }}
SMTP_REPLY_EMAIL={{ outline_smtp_reply }}
SMTP_SECURE=true

# Slack
SLACK_CLIENT_ID={{ outline_slack_client_id }}
SLACK_CLIENT_SECRET={{ outline_slack_client_secret }}

GITHUB_CLIENT_ID={{ outline_github_client_id }}
GITHUB_CLIENT_SECRET={{ outline_github_client_secret }}
GITHUB_APP_NAME={{ outline_github_app_name }}
GITHUB_APP_ID={{ outline_github_app_id }}
GITHUB_APP_PRIVATE_KEY={{ outline_github_app_private_key }}

# Performance
WEB_CONCURRENCY=8

# Security
RATE_LIMITER_ENABLED=true
RATE_LIMITER_REQUESTS=2000
RATE_LIMITER_DURATION_WINDOW=60

# Other settings
ENABLE_UPDATES=true
DEFAULT_LANGUAGE=ja_JP
ENABLE_PUBLIC_SHARING=true
