---
# Variables for watch role
# These variables define internal configuration for the watch role

# Download URLs for monitoring components
watch_node_exporter_download_url: "https://github.com/prometheus/node_exporter/releases/download/v{{ watch_node_exporter_version }}/node_exporter-{{ watch_node_exporter_version }}.linux-amd64.tar.gz"
watch_cadvisor_download_url: "https://github.com/google/cadvisor/releases/download/v{{ watch_cadvisor_version }}/cadvisor-v{{ watch_cadvisor_version }}-linux-amd64"

# Installation paths
watch_install_dir: "/opt"
watch_bin_dir: "/usr/local/bin"
watch_config_dir: "/etc"

# Service user
watch_service_user: "prometheus"
watch_service_group: "prometheus"

# systemd service templates
watch_node_exporter_service_template: |
  [Unit]
  Description=Node Exporter
  Wants=network-online.target
  After=network-online.target

  [Service]
  User={{ watch_service_user }}
  Group={{ watch_service_group }}
  Type=simple
  ExecStart={{ watch_bin_dir }}/node_exporter --web.listen-address=:{{ watch_node_exporter_port }}
  Restart=always
  RestartSec=5

  [Install]
  WantedBy=multi-user.target

watch_cadvisor_service_template: |
  [Unit]
  Description=cAdvisor
  Wants=network-online.target
  After=network-online.target

  [Service]
  User=root
  Group=root
  Type=simple
  ExecStart={{ watch_bin_dir }}/cadvisor -port={{ watch_cadvisor_port }}
  Restart=always
  RestartSec=5

  [Install]
  WantedBy=multi-user.target


# Package manager mappings
watch_package_managers:
  debian:
    update_cmd: "apt update"
    install_cmd: "apt install -y"
    packages:
      - curl
      - wget
      - tar
