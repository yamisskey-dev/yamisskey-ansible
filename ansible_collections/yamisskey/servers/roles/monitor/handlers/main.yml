---
# Restart monitoring stack handler
- name: Restart monitoring stack
  community.docker.docker_compose_v2:
    project_src: "{{ monitor_compose_dir }}"
    state: present
    recreate: always
  listen: "Restart monitoring stack"
  failed_when: false
  retries: 2
  delay: 3

# Wait for services handler
- name: Wait for monitoring services
  pause:
    seconds: 30
  listen: "Wait for monitoring services"