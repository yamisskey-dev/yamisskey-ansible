# nostr-rs-relay configuration
# https://github.com/scsibug/nostr-rs-relay
# Yamisskey community relay - focused on mental health and privacy

[info]
relay_url = "wss://{{ nostr_server_name }}"
name = "{{ nostr_relay_name }}"
description = "{{ nostr_relay_description }}"
contact = "{{ nostr_relay_contact }}"
# Relay icon
icon = "https://raw.githubusercontent.com/yamisskey-dev/yamisskey-assets/main/yami.ski/yami-logo-192x192.png"

[database]
engine = "sqlite"
data_directory = "/usr/src/app/db"

[network]
port = 8080
address = "0.0.0.0"
# Ping interval to keep connections alive
ping_interval_seconds = 300

[limits]
# Rate limiting - moderate to prevent spam but allow normal usage
messages_per_sec = 3
subscriptions_per_min = 10
# Event size limits
max_event_bytes = 131072
max_ws_message_bytes = 131072
max_ws_frame_bytes = 131072
# Buffer settings
broadcast_buffer = 16384
event_persist_buffer = 4096
# Connection limits
max_conn = 256

[authorization]
# Pubkey whitelist (empty = allow all)
# For a community relay, keep open but monitor
pubkey_whitelist = []

[verified_users]
# NIP-05 verification
verify_expiration = "1 week"
verify_update_frequency = "24 hours"
verify_update_failure_duration = "1 hour"
# Trust yami.ski domain for NIP-05
self_domain_verified = true

[logging]
# Log level: trace, debug, info, warn, error
folder_path = "/usr/src/app/db"
file_prefix = "nostr-relay"
