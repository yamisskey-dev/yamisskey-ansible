---
# Handlers for watch role
# These handlers manage the lifecycle of monitoring services

- name: restart node_exporter
  systemd:
    name: node_exporter
    state: restarted
    daemon_reload: true
  listen: "restart watch services"

- name: restart cadvisor
  systemd:
    name: cadvisor
    state: restarted
    daemon_reload: true
  listen: "restart watch services"


- name: reload systemd
  systemd:
    daemon_reload: true

- name: restart node_exporter
  systemd:
    name: node_exporter
    state: restarted
    enabled: true

- name: restart cadvisor
  systemd:
    name: cadvisor
    state: restarted
    enabled: true
